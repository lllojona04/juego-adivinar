<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Adivina al Jugador (2 Vidas)</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap');

    * { box-sizing: border-box; margin:0; padding:0; }

    body {
      font-family: 'Roboto', sans-serif;
      background: linear-gradient(135deg, #007a33, #ffffff); /* Verde y blanco Racing */
      color: #fff;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }

    .game-container, #startScreen {
      width: 90%;
      max-width: 500px;
      background-color: #fff;
      color: #007a33;
      border-radius: 20px;
      box-shadow: 0px 10px 30px rgba(0,0,0,0.3);
      padding: 30px 25px;
      text-align: center;
      position: relative;
    }

    h1, h2 {
      color: #007a33;
      margin-bottom: 20px;
    }

    #startScreen h2 { font-size: 1.8em; }
    #startScreen p, #startScreen ul { text-align: left; margin-bottom: 10px; font-size: 15px; }

    button {
      padding: 12px 25px;
      margin: 10px 5px;
      font-size: 16px;
      font-weight: bold;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      transition: all 0.3s ease;
      color: #fff;
    }

    #startButton { background: #007a33; }
    #startButton:hover { background: #005f26; }

    #restartButton { background: #007a33; }
    #restartButton:hover { background: #005f26; }

    #exitButton { background: #c0392b; }
    #exitButton:hover { background: #a93226; }

    .image-wrapper {
      position: relative;
      width: 100%;
      /* height: 400px; */
      margin: 20px 0;
      border-radius: 15px;
      overflow: hidden;
      background: #ccc;
    }

    .image-container img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: clip-path 0.7s ease;
      display: block;
    }

    #revealName {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background-color: rgba(255,255,255,0.85);
      padding: 12px 20px;
      border-radius: 10px;
      font-weight: bold;
      font-size: 1.4em;
      color: #d32f2f;
      z-index: 10;
      opacity: 0;
      transition: opacity 0.5s ease;
    }

    #playerPosition { margin-top: 10px; font-size: 1.2em; font-weight: bold; min-height: 22px; }

    input[type="text"] {
      padding: 12px;
      font-size: 16px;
      border-radius: 10px;
      border: 2px solid #007a33;
      width: 80%;
      margin-bottom: 15px;
    }

    #guessButton, #nextPlayerButton { width: 80%; margin-bottom: 15px; }

    #guessButton { background-color: #28a745; }
    #guessButton:hover:not(:disabled) { background-color: #218838; }

    #nextPlayerButton { background-color: #17a2b8; }
    #nextPlayerButton:hover:not(:disabled) { background-color: #117a8b; }

    #progressCounter { font-weight: bold; font-size: 18px; margin-bottom: 15px; }
    .hearts { font-size: 28px; color: red; margin-top: 10px; }
    #message { font-weight: bold; min-height: 22px; margin-bottom: 15px; color: #e67e22; }

  </style>
</head>
<body>

  <!-- Pantalla de inicio -->
  <div id="startScreen">
    <h2>¬°Bienvenido a "Adivina al Jugador"!</h2>
    <p><strong>Objetivo:</strong> Reconocer a los jugadores del Racing de Santander a partir de su imagen.</p>
    <p><strong>C√≥mo jugar:</strong></p>
    <ul>
      <li>La imagen del jugador se mostrar√° parcialmente oculta.</li>
      <li>Tienes 2 vidas para adivinar:</li>
      <ul>
        <li>Primera vida: sin pistas.</li>
        <li>Segunda vida: se mostrar√° la posici√≥n como pista.</li>
      </ul>
      <li>Si fallas ambas, la imagen completa se revelar√° con el nombre.</li>
      <li>Avanza al siguiente jugador con el bot√≥n correspondiente.</li>
    </ul>
    <p>Progreso: ‚ÄúLlevas X de Y‚Äù.</p>
    <button id="startButton">¬°Comenzar!</button>
  </div>

  <!-- Juego -->
  <div class="game-container" id="gameContainer" style="display:none;">
    <p id="progressCounter">Llevas 0 de 0</p>
    <h1>Adivina al Jugador</h1>
    
    <div class="image-wrapper">
      <div class="image-container">
        <img id="playerImage" src="" alt="Jugador">
      </div>
      <span id="revealName"></span>
    </div>

    <p id="playerPosition"></p>
    <input type="text" id="guessInput" placeholder="Escribe el nombre del jugador">
    <button id="guessButton">Adivinar</button>
    <button id="nextPlayerButton" style="display:none;">Siguiente Jugador</button>

    <p id="message"></p>
    <p class="hearts" id="livesDisplay">‚ù§Ô∏è‚ù§Ô∏è</p>

    <div id="finalScore" style="margin-top:20px; display:none;">
      <h3>üèÜ Resultado Final üèÜ</h3>
      <p id="scoreText"></p>
      <button id="restartButton">Volver a jugar</button>
      <button id="exitButton">Salir</button>
    </div>
  </div>

  <script>
    const startScreen = document.getElementById("startScreen");
    const startButton = document.getElementById("startButton");
    const gameContainer = document.getElementById("gameContainer");
    const playerImage = document.getElementById("playerImage");
    const playerPositionDisplay = document.getElementById("playerPosition");
    const guessInput = document.getElementById("guessInput");
    const guessButton = document.getElementById("guessButton");
    const nextPlayerButton = document.getElementById("nextPlayerButton");
    const message = document.getElementById("message");
    const livesDisplay = document.getElementById("livesDisplay");
    const revealName = document.getElementById("revealName");
    const finalScoreDiv = document.getElementById("finalScore");
    const scoreText = document.getElementById("scoreText");
    const restartButton = document.getElementById("restartButton");
    const exitButton = document.getElementById("exitButton");
    const progressCounter = document.getElementById("progressCounter");

    const players = [
      { name: "Jokin Ezkieta", position: "Portero", image: "imagenes/jugador0.jpg" },
      { name: "Mario Garcia", position: "Lateral izquierdo", image: "imagenes/jugador1.jpg" },
      { name: "Jorge Salinas", position: "Lateral izquierdo", image: "imagenes/jugador2.jpg" },
      { name: "Javi Castro", position: "Defensa central", image: "imagenes/jugador3.jpg" },
      { name: "Marco Sangalli", position: "Extremo izquierdo o delantero", image: "imagenes/jugador4.jpg" },
      { name: "Jeremy", position: "Delantero", image: "imagenes/jugador5.jpg" },
      { name: "Asier Villalibre", position: "Delantero", image: "imagenes/jugador6.jpg" },
      { name: "Andr√©s Mart√≠n", position: "Extremo derecho", image: "imagenes/jugador7.jpg" }
    ];

    let currentPlayerIndex = 0;
    let maxLives = 2;
    let lives = maxLives;
    let correctGuesses = 0;
    let failedGuesses = 0;

    function shuffleArray(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
      return array;
    }

    function updateHearts() {
      let hearts = "";
      for (let i = 0; i < maxLives; i++) hearts += i < lives ? "‚ù§Ô∏è" : "ü§ç";
      livesDisplay.textContent = hearts;
    }

    function setClipByLives() {
      playerImage.style.clipPath = lives >= 1 ? "inset(0% 0% 70% 0%)" : "inset(0 0 0 0)";
    }

    function showPlayerPosition(position) { playerPositionDisplay.textContent = `Posici√≥n: ${position}`; }
    function hidePlayerPosition() { playerPositionDisplay.textContent = ""; }
    function showRevealedName(name) { revealName.textContent = name; revealName.style.opacity = 1; }
    function updateProgressCounter() { progressCounter.textContent = `Llevas ${currentPlayerIndex + 1} de ${players.length}`; }

    function loadPlayer() {
      if (currentPlayerIndex >= players.length) { displayFinalScore(); return; }
      playerImage.src = players[currentPlayerIndex].image;
      lives = maxLives;
      updateHearts();
      setClipByLives();
      guessInput.value = "";
      message.textContent = "";
      revealName.style.opacity = 0;
      hidePlayerPosition();
      updateProgressCounter();
      guessButton.disabled = false;
      guessInput.disabled = false;
      guessButton.style.display = 'inline-block';
      nextPlayerButton.style.display = 'none';
    }

    function displayFinalScore() {
      finalScoreDiv.style.display = 'block';
      scoreText.innerHTML = `Aciertos: <strong style="color:green;">${correctGuesses}</strong><br>Fallos: <strong style="color:red;">${failedGuesses}</strong>`;
      guessButton.style.display = 'none';
      nextPlayerButton.style.display = 'none';
      message.textContent = "¬°Felicidades! Has completado el juego.";
      livesDisplay.textContent = "";
      hidePlayerPosition();
    }

    startButton.addEventListener("click", () => { startScreen.style.display="none"; gameContainer.style.display="block"; shuffleArray(players); loadPlayer(); });
    guessButton.addEventListener("click", () => {
      const guess = guessInput.value.trim().toLowerCase();
      const correctName = players[currentPlayerIndex].name.toLowerCase();
      if (guess === correctName) {
        correctGuesses++; guessButton.disabled = true; guessInput.disabled = true; playerImage.style.clipPath="inset(0 0 0 0)"; hidePlayerPosition();
        nextPlayerButton.textContent="Siguiente Jugador"; nextPlayerButton.style.display='inline-block';
      } else {
        lives--;
        if (lives===1){ updateHearts(); showPlayerPosition(players[currentPlayerIndex].position); message.textContent="Incorrecto. ¬°Aqu√≠ tienes una pista!"; guessInput.value=""; }
        else { failedGuesses++; updateHearts(); setClipByLives(); hidePlayerPosition(); message.innerHTML=`¬°Se acabaron las vidas! <br>El jugador era: <strong>${players[currentPlayerIndex].name}</strong>`; guessButton.disabled=true; guessInput.disabled=true; showRevealedName(players[currentPlayerIndex].name); nextPlayerButton.textContent="Continuar"; nextPlayerButton.style.display='inline-block'; }
      }
    });

    nextPlayerButton.addEventListener("click", ()=>{ currentPlayerIndex++; loadPlayer(); });
    restartButton.addEventListener("click", ()=>{ shuffleArray(players); currentPlayerIndex=0; correctGuesses=0; failedGuesses=0; finalScoreDiv.style.display='none'; loadPlayer(); });
    exitButton.addEventListener("click", ()=>{ window.close(); });

  </script>

</body>
</html>

