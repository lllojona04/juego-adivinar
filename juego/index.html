<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Adivina al Jugador (2 Vidas)</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      background-color: #f4f4f4;
    }

    .game-container {
      max-width: 400px;
      margin: 50px auto;
      padding: 20px;
      background-color: white;
      border-radius: 10px;
      box-shadow: 0px 0px 10px rgba(0,0,0,0.2);
    }

    .image-wrapper {
      position: relative;
      width: 200px;
      height: 300px;
      margin: 20px auto;
    }

    .image-container {
      width: 100%;
      height: 100%;
      overflow: hidden;
      border-radius: 10px; 
      border: 3px solid #333;
      position: relative;
    }

    .image-container img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: clip-path 0.7s ease;
    }

    #revealName {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background-color: rgba(255, 255, 255, 0.85);
      padding: 5px 15px;
      border-radius: 5px;
      font-weight: bold;
      font-size: 1.2em;
      color: #D32F2F;
      z-index: 10;
      opacity: 0;
      transition: opacity 0.5s ease;
      pointer-events: none;
      text-align: center;
    }
    
    #playerPosition {
      margin-top: 10px;
      font-size: 1.1em;
      font-weight: bold;
      color: #333;
      min-height: 20px;
    }

    input, button {
      padding: 10px;
      margin: 10px 0;
      width: 80%;
      font-size: 16px;
      box-sizing: border-box;
    }

    button {
      cursor: pointer;
      background-color: #4CAF50;
      color: white;
      border: none;
      border-radius: 5px;
      transition: background-color 0.3s;
    }

    button:hover:not(:disabled) {
      background-color: #45a049;
    }

    button:disabled {
      background-color: #ccc;
      cursor: not-allowed;
    }

    #nextPlayerButton {
      background-color: #2196F3;
    }

    #nextPlayerButton:hover:not(:disabled) {
      background-color: #1976D2;
    }

    #message {
      font-weight: bold;
      min-height: 20px; 
    }

    .hearts {
      font-size: 24px;
      color: red;
      margin-top: 10px;
    }

    #finalScore h3 {
      color: #FF9800;
      margin-bottom: 5px;
    }

    #restartButton, #exitButton {
      padding: 10px 20px;
      margin: 5px;
      font-size: 16px;
      border-radius: 5px;
      border: none;
      cursor: pointer;
      display: none;
    }

    #restartButton {
      background-color: #4CAF50;
      color: white;
    }

    #exitButton {
      background-color: #f44336;
      color: white;
    }

    #restartButton:hover {
      background-color: #45a049;
    }

    #exitButton:hover {
      background-color: #d32f2f;
    }

    /* Pantalla de inicio */
    #startScreen {
      max-width: 400px;
      margin: 50px auto;
      padding: 20px;
      background-color: white;
      border-radius: 10px;
      box-shadow: 0px 0px 10px rgba(0,0,0,0.2);
    }

    #startScreen h2 {
      margin-bottom: 15px;
    }

    #startScreen p {
      text-align: left;
      font-size: 14px;
      margin-bottom: 10px;
    }
  </style>
</head>
<body>

  <!-- Pantalla de inicio con explicaci√≥n -->
  <div id="startScreen">
    <h2>Bienvenido a "Adivina al Jugador"</h2>
    <p><strong>Objetivo:</strong> Reconocer a los jugadores del Racing De Santander a partir de su imagen.</p>
    <p><strong>C√≥mo se juega:</strong></p>
    <ul style="text-align:left;">
      <li>Cada jugador aparece parcialmente oculto (solo los ojos visibles al inicio).</li>
      <li>Tienes <strong>2 vidas por jugador</strong>:</li>
      <ul>
        <li>Primera vida: intenta adivinar sin ayuda.</li>
        <li>Segunda vida: se muestra la posici√≥n del jugador como pista.</li>
      </ul>
      <li>Si fallas las dos vidas, la imagen se revela y muestra el nombre correcto.</li>
      <li>Avanza al siguiente jugador con el bot√≥n correspondiente.</li>
    </ul>
    <p>Progreso: se mostrar√° ‚ÄúLlevas X de Y‚Äù para que veas cu√°ntos jugadores has intentado.</p>
    <button id="startButton">Comenzar</button>
  </div>

  <!-- Juego -->
  <div class="game-container" id="gameContainer" style="display:none;">
    <p id="progressCounter" style="font-weight:bold; font-size:18px; margin-bottom:10px;">Llevas 0 de 0</p>
    <h1>Adivina al Jugador de Segunda Divisi√≥n</h1>
    
    <div class="image-wrapper">
      <div class="image-container">
        <img id="playerImage" src="" alt="Jugador">
      </div>
      <span id="revealName"></span>
    </div>
    
    <p id="playerPosition"></p> 
    <input type="text" id="guessInput" placeholder="Escribe el nombre del jugador">
    <button id="guessButton">Adivinar</button>
    <button id="nextPlayerButton" style="display:none;">Siguiente Jugador</button>
    
    <p id="message"></p>
    <p class="hearts" id="livesDisplay">‚ù§Ô∏è‚ù§Ô∏è</p>

    <div id="finalScore" style="margin-top: 20px; display: none;">
      <h3>üèÜ Resultado Final üèÜ</h3>
      <p id="scoreText"></p>
      <button id="restartButton">Volver a jugar</button>
      <button id="exitButton">Salir</button>
    </div>
  </div>

  <script>
    // Elementos del DOM
    const startScreen = document.getElementById("startScreen");
    const startButton = document.getElementById("startButton");
    const gameContainer = document.getElementById("gameContainer");
    const playerImage = document.getElementById("playerImage");
    const playerPositionDisplay = document.getElementById("playerPosition");
    const guessInput = document.getElementById("guessInput");
    const guessButton = document.getElementById("guessButton");
    const nextPlayerButton = document.getElementById("nextPlayerButton");
    const message = document.getElementById("message");
    const livesDisplay = document.getElementById("livesDisplay");
    const revealName = document.getElementById("revealName");
    const finalScoreDiv = document.getElementById("finalScore");
    const scoreText = document.getElementById("scoreText");
    const restartButton = document.getElementById("restartButton");
    const exitButton = document.getElementById("exitButton");
    const progressCounter = document.getElementById("progressCounter");

    // Jugadores
    const players = [
      { name: "Jokin Ezkieta", position: "Portero", image: "imagenes/jugador0.jpg" }, 
      { name: "Mario Garcia", position: "lateral izquierdo", image: "imagenes/jugador1.jpg" }, 
      { name: "Jorge Salinas", position: "lateral izquierdo", image: "imagenes/jugador2.jpg" },
      { name: "Javi Castro", position: "defensa central", image: "imagenes/jugador3.jpg" },
      { name: "Marco Sangalli", position: "extremo izquierdo o delantero", image: "imagenes/jugador4.jpg" },
      { name: "Jeremy", position: "Delantero", image: "imagenes/jugador5.jpg" },
      { name: "Asier Villalibre", position: "Delantero", image: "imagenes/jugador6.jpg" }, 
      { name: "Andr√©s Mart√≠n", position: "extremo derecho", image: "imagenes/jugador7.jpg" }          
    ];

    let currentPlayerIndex = 0;
    let maxLives = 2;
    let lives = maxLives;
    let correctGuesses = 0;
    let failedGuesses = 0;

    // Funciones
    function shuffleArray(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
      return array;
    }

    function updateHearts() {
      let hearts = "";
      for(let i=0; i<maxLives; i++){
        hearts += i < lives ? "‚ù§Ô∏è" : "ü§ç";
      }
      livesDisplay.textContent = hearts;
    }

    function setClipByLives() {
      if (lives >= 1) {
        playerImage.style.clipPath = "inset(0% 15% 70% 15%)"; 
      } else { 
        playerImage.style.clipPath = "inset(0 0 0 0)";
      }
    }

    function showPlayerPosition(position) {
      playerPositionDisplay.textContent = `Posici√≥n: ${position}`;
    }

    function hidePlayerPosition() {
      playerPositionDisplay.textContent = "";
    }

    function showRevealedName(name) {
      revealName.textContent = name;
      revealName.style.opacity = 1;
    }

    function updateProgressCounter() {
      progressCounter.textContent = `Llevas ${currentPlayerIndex + 1} de ${players.length}`;
    }

    function loadPlayer() {
      if (currentPlayerIndex >= players.length) {
        displayFinalScore();
        return;
      }
      playerImage.src = players[currentPlayerIndex].image;
      lives = maxLives;
      updateHearts();
      setClipByLives();
      guessInput.value = "";
      message.textContent = "";
      revealName.style.opacity = 0;
      hidePlayerPosition();
      updateProgressCounter();
      guessButton.disabled = false;
      guessInput.disabled = false;
      guessButton.style.display = 'inline-block';
      nextPlayerButton.style.display = 'none';
    }

    function displayFinalScore() {
      finalScoreDiv.style.display = 'block';
      scoreText.innerHTML = `
        Aciertos: <strong style="color:green;">${correctGuesses}</strong><br>
        Fallos: <strong style="color:red;">${failedGuesses}</strong>
      `;
      guessButton.style.display = 'none';
      nextPlayerButton.style.display = 'none';
      message.textContent = "¬°Felicidades! Has completado el juego.";
      livesDisplay.textContent = "";
      hidePlayerPosition();
    }

    // Eventos del juego
    startButton.addEventListener("click", () => {
      startScreen.style.display = "none";
      gameContainer.style.display = "block";
      shuffleArray(players);
      loadPlayer();
    });

    guessButton.addEventListener("click", () => {
      const guess = guessInput.value.trim().toLowerCase();
      const correctName = players[currentPlayerIndex].name.toLowerCase();

      if (guess === correctName) {
        correctGuesses++;
        guessButton.disabled = true;
        guessInput.disabled = true;
        playerImage.style.clipPath = "inset(0 0 0 0)";
        hidePlayerPosition();
        nextPlayerButton.textContent = "Siguiente Jugador";
        nextPlayerButton.style.display = 'inline-block';
      } else {
        lives--;
        if (lives === 1) {
          updateHearts();
          showPlayerPosition(players[currentPlayerIndex].position);
          message.textContent = "Incorrecto. ¬°Aqu√≠ tienes una pista!";
          guessInput.value = "";
        } else {
          failedGuesses++;
          updateHearts();
          setClipByLives();
          hidePlayerPosition();
          message.innerHTML = `¬°Se acabaron las vidas! <br>El jugador era: <strong>${players[currentPlayerIndex].name}</strong>`;
          guessButton.disabled = true;
          guessInput.disabled = true;
          showRevealedName(players[currentPlayerIndex].name);
          nextPlayerButton.textContent = "Continuar";
          nextPlayerButton.style.display = 'inline-block';
        }
      }
    });

    nextPlayerButton.addEventListener("click", () => {
      currentPlayerIndex++;
      loadPlayer();
    });

    restartButton.addEventListener("click", () => {
      shuffleArray(players);
      currentPlayerIndex = 0;
      correctGuesses = 0;
      failedGuesses = 0;
      finalScoreDiv.style.display = 'none';
      loadPlayer();
    });

    exitButton.addEventListener("click", () => {
      window.close();
    });
  </script>
</body>
</html>

